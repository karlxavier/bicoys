<section class="container">
    <div class="space-70"></div>
    <div class="row">
        <div class="col-xs-12" id="resto_banner" style="padding: 0;">
        	<div class="wrapper wrapper-content animated fadeInUp" style="padding-bottom: 0;">
	        	<div class="row">
	        		<div class="col-lg-12">
	        			<div class="ibox">
	        				<div class="ibox-content" style="padding: 15px 0 20px 0;">
	        					<h2 style="margin-left: 10px;">
	        						Complete checkout process
	        					</h2>
	        					<div id="wizard" role="application" class="wizard clearfix">
	        						<h1>Order Summary</h1>
								    <div>
								    	<div class="row">
								    		<div class="col-lg-6">
								    			<h3>
										    		<i class="fa fa-shopping-basket"></i> Order Summary
										    	</h3>
								    		</div>
								    		<div class="col-lg-6">
								    			<span class="pull-right" style="margin-bottom: 10px;">
										    		<%= link_to restaurant_path(@order.restaurant_id), class: "btn btn-default" do %>
										    			<i class="fa fa-mail-reply"></i>
										    			Modify my Order
										    		<% end %>
										    	</span>
								    		</div>
								    	</div>
								    	
								    	<div class="row">
								    		<div class="col-lg-12">
								    			<div class="wrapper wrapper-content animated fadeInRight" style="padding: 0 10px 0 10px;">
								    				<div class="ibox-content p-xl" style="background-color: transparent; padding: 15px;">
								    					<div class="table-responsive m-t">
							                                <table class="table invoice-table">
							                                    <thead>
							                                    <tr>
							                                        <th>Order Items</th>
							                                        <th>Quantity</th>
							                                        <th>Unit Price</th>
							                                        <th>Total Price</th>
							                                    </tr>
							                                    </thead>
							                                    <tbody>
							                                    	<% @order.order_items.each do |item| %>
									                                    <tr>
									                                        <td>
									                                        	<div><strong><%= item.menu.name %></strong></div>
									                                            <small><%= item.menu.description %></small>
									                                        </td>
									                                        <td><%= item.quantity %></td>
									                                        <td>₱ <%= number_with_precision(item.unit_price, :precision => 0, :delimiter => ',') %></td>
									                                        <td>₱ <%= number_with_precision(item.total_price, :precision => 0, :delimiter => ',') %></td>
									                                    </tr>
								                                    <% end %>
							                                    </tbody>
							                                </table>
							                                <table class="table invoice-total">
								                                <tbody>
								                                <tr>
								                                    <td><strong>Sub Total :</strong></td>
								                                    <td>₱ <%= number_with_precision(@order.subtotal, :precision => 0, :delimiter => ',') %></td>
								                                </tr>
								                                <tr>
								                                    <td><strong>Service Charge :</strong></td>
								                                    <td>₱ 50</td>
								                                </tr>
								                                <tr>
								                                    <td><strong>TOTAL :</strong></td>
								                                    <td>
								                                    	<h3 style="margin-bottom: 2px;">
								                                    		₱ <%= number_with_precision(@order.total, :precision => 0, :delimiter => ',') %>
								                                    	</h3>
								                                    </td>
								                                </tr>
								                                </tbody>
								                            </table>
														</div>
								    				</div>
								    			</div>
								    		</div>
								    	</div>
								    </div>
								 
								    <h1>Delivery Address</h1>
								    <div>
								    	<h3><i class="fa fa-motorcycle"></i> Delivery Address</h3>
								    	<div class="row">
								    		<div class="col-lg-12">
								    			<div class="wrapper wrapper-content animated fadeInRight" style="padding: 0 10px 0 10px;">
								    				<div class="ibox float-e-margins">
								                        <div class="ibox-content payments-method">
								                        <i class="fa fa-map-marker"></i> 
								                            <strong>Your Delivery Location </strong> 
								                            <%= @user_address ? @user_address.full_address : '' %>
								                        </div>
								                    </div>
								    			</div>
								    		</div>
								    	</div> 
								    	<%= form_for @user_address, remote: true do |f| %>
									    	<div class="row">
								                <div class="col-lg-12">
								                	<div class="wrapper wrapper-content animated fadeInRight" style="padding: 0 10px 0 10px;">
								                		<strong>Contact Details </strong> 
							                     
							                            	<div class="form-group">
							                            		<div class="col-lg-12">
							                            			<div class="row">
							                            				<div class="col-md-4">
							                            					<%= f.text_field :mobile_number, class: "form-control", placeholder: "Mobile Number"%>
							                            				</div>
							                            				<div class="col-md-4">
							                            					<%= f.text_field :landline_number, class: "form-control", placeholder: "Landline Number (optional)" %>
							                            				</div>
							                            			</div>
							                            		</div>
							                            	</div>
											
								                    </div>
								                </div>
								            </div>
								            <div class="row" style="margin-top: 20px;">
								                <div class="col-lg-12">
								                	<div class="wrapper wrapper-content animated fadeInRight" style="padding: 0 10px 0 10px;">
								                		<strong>Address Details </strong> 
								                
								                            	<div class="form-group">
								                            		<div class="col-lg-12">
								                            			<div class="row">
								                            				<div class="col-md-4">
								                            					<%= f.text_field :street_name, class: "form-control", placeholder: "Street Name and House Number" %>
								                            				</div>
								                            				<div class="col-md-8" style="padding-right: 0;">
								                            					<%= f.text_field :additional_directions, class: "form-control", placeholder: "Additional Directions", required: "" %>
								                            				</div>
								                            			</div>
								                            		</div>
								                            	</div>
								             
							                            	<div style="margin-top: 80px;">
							                            		<%= button_tag(type: 'Submit', class: "btn btn-default pull-right m-t-n-xs") do %>
															        <i class="icon-ok icon-white"></i> Update My Address
															    <% end %> 
							                            	</div>
							                            
								                    </div>
								                </div>
								            </div>
								        <% end %>
								    </div>

								    <h1>Payment</h1>
								    <div>
								    	<h3><i class="fa fa-credit-card"></i> Payment</h3>
								    	<div class="row">
								    		<div class="col-lg-12">
								    			<div class="wrapper wrapper-content animated fadeInRight" style="padding: 0 10px 0 10px;">
								    				<div class="row">
										                <div class="col-lg-12">
										                    <div class="ibox" style="background-color: transparent;">
										                        <div class="ibox-title">
										                            Payment method
										                        </div>
										                        <div class="ibox-content">
										                            <div class="panel-group payments-method" id="accordion">
										                                <div class="panel panel-default">
										                                    <div class="panel-heading">
										                                        <div class="pull-right">
										                                            <i class="fa fa-money text-success"></i>
										                                        </div>
										                                        <h5 class="panel-title">
										                                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" class="collapsed" aria-expanded="false">Cash on Delivery</a>
										                                        </h5>
										                                    </div>
										                                    <div id="collapseOne" class="panel-collapse collapse" aria-expanded="false" style="height: 0px;">
										                                        <div class="panel-body">

										                                            <div class="row">
										                                                <div class="col-md-10">
										                                                    <h2>Summary</h2>
										                                                    <strong>Restaurant:</strong> <%= @order.restaurant.name %> <br>
										                                                    <strong>Price:</strong> 
										                                                    <span class="text-navy">₱ <%= number_with_precision(@order.total, :precision => 0, :delimiter => ',') %></span>

										                                                    <p class="m-t">
										                                                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
										                                                        eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
										                                                        enim ad minim veniam, quis nostrud exercitation ullamco laboris
										                                                        nisi ut aliquip ex ea commodo consequat.
										                                                    </p>
										                                                </div>
										                                            </div>
										                                        </div>
										                                    </div>
										                                </div>
										                                <div class="panel panel-default">
										                                    <div class="panel-heading">
										                                        <div class="pull-right">
										                                            <i class="fa fa-cc-amex text-success"></i>
										                                            <i class="fa fa-cc-mastercard text-warning"></i>
										                                            <i class="fa fa-cc-discover text-danger"></i>
										                                        </div>
										                                        <h5 class="panel-title">
										                                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="true" class="">Credit Card</a>
										                                        </h5>
										                                    </div>
										                                    <div id="collapseTwo" class="panel-collapse collapse in" aria-expanded="true">
										                                        <div class="panel-body">

										                                            <div class="row">
										                                                <div class="col-md-4">
										                                                    <h2>Summary</h2>
										                                                    <strong>Restaurant:</strong> <%= @order.restaurant.name %> <br>
										                                                    <strong>Price:</strong> 
										                                                    <span class="text-navy">₱ <%= number_with_precision(@order.total, :precision => 0, :delimiter => ',') %></span>

										                                                    <p class="m-t">
										                                                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
										                                                        eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
										                                                        enim ad minim veniam, quis nostrud exercitation ullamco laboris
										                                                        nisi ut aliquip ex ea commodo consequat.

										                                                    </p>
										                                                    <p>
										                                                        Duis aute irure dolor
										                                                        in reprehenderit in voluptate velit esse cillum dolore eu fugiat
										                                                        nulla pariatur. Excepteur sint occaecat cupidatat.
										                                                    </p>
										                                                </div>
										                                                <div class="col-md-8">
										                                                    <form role="form" id="payment-form">
										                                                        <div class="row">
										                                                            <div class="col-xs-12">
										                                                                <div class="form-group">
										                                                                    <label>CARD NUMBER</label>
										                                                                    <div class="input-group">
										                                                                        <input type="text" class="form-control" name="Number" placeholder="Valid Card Number" required="">
										                                                                        <span class="input-group-addon"><i class="fa fa-credit-card"></i></span>
										                                                                    </div>
										                                                                </div>
										                                                            </div>
										                                                        </div>
										                                                        <div class="row">
										                                                            <div class="col-xs-7 col-md-7">
										                                                                <div class="form-group">
										                                                                    <label>EXPIRATION DATE</label>
										                                                                    <input type="text" class="form-control" name="Expiry" placeholder="MM / YY" required="">
										                                                                </div>
										                                                            </div>
										                                                            <div class="col-xs-5 col-md-5 pull-right">
										                                                                <div class="form-group">
										                                                                    <label>CV CODE</label>
										                                                                    <input type="text" class="form-control" name="CVC" placeholder="CVC" required="">
										                                                                </div>
										                                                            </div>
										                                                        </div>
										                                                        <div class="row">
										                                                            <div class="col-xs-12">
										                                                                <div class="form-group">
										                                                                    <label>NAME OF CARD</label>
										                                                                    <input type="text" class="form-control" name="nameCard" placeholder="NAME AND SURNAME">
										                                                                </div>
										                                                            </div>
										                                                        </div>
										                                                        <div class="row">
										                                                            <div class="col-xs-12">
										                                                                <button class="btn btn-primary" type="submit">Make a payment!</button>
										                                                            </div>
										                                                        </div>
										                                                    </form>
										                                                </div>
										                                            </div>
										                                        </div>
										                                    </div>
										                                </div>
										                            </div>
										                        </div>
										                    </div>
										                </div>
										            </div>
								    			</div>
								    		</div>
								    	</div>
								    </div>

								    <h1>Finish</h1>
								    <div>habhub na!</div>
                        		</div>
	        				</div>
	        			</div>
	        		</div>
	        	</div>
        	</div>
        </div>
    </div>
</section>
<script type="text/javascript">
    $(document).ready(function(){
        $("#wizard").steps({
        	onStepChanging: function (event, currentIndex, newIndex)
            {
                // alert(newIndex);
                if (currentIndex == 0)
                {
                	return true;
                }

                if (currentIndex > newIndex)
                {
                    return true;
                }

                if (currentIndex == 1)
                {
                	var additional_address = document.getElementById("user_address_additional_directions");
                	if (additional_address.value ==null || additional_address.value =="")
                	{
                		additional_address.className += " error";
                		return false;
                	}
                	else
                	{
                		$('#user_address_additional_directions').removeClass("error");
                		return true;
                	}
                	
                }
            }
        });
   });
</script>
